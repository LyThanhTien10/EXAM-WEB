// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User{
  id  String @id @default(dbgenerated("gen_random_uuid()"))
  email String @unique
  username String
  hash String
  salt String
  role String
  courses Course[]
  refreshToken String
  isVerify Boolean
  lastLogin Int
  createAt Int  
  examInProgress String?
  token       Token?     @relation(fields: [tokenId], references: [id])
  tokenId     String? @unique

}

model Course {
  id  String @id @default(dbgenerated("gen_random_uuid()"))
  title     String
  status String
  totalExam Int @default(0)
  sections  Section[]
  exams   Exam[]
  users User[]
}

model Section{
  id String @id @default(dbgenerated("gen_random_uuid()"))
  course    Course?     @relation(fields: [courseId], references: [id])
  courseId String?
  title String
  index Int
  exams Exam[]
}

model Exam{
  id String @id @default(dbgenerated("gen_random_uuid()"))
  course    Course?     @relation(fields: [courseId], references: [id])
  courseId String?
  section Section? @relation(fields: [sectionId], references: [id])
  sectionId String?
  type String 
  index Int
  quiz Int
  duration Int
}

model Token{
  id String @id @default(dbgenerated("gen_random_uuid()"))
  user User?
  token String
  createAt Int
}